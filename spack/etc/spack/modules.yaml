modules:
  default:
    enable:
      - lmod
    lmod:
      all:
        autoload: 'none'
      ^python:
        autoload: 'direct'
      ^r:
        autoload: 'direct'
      hash_length: 8
      projections:
        explicit_package: '{name}/{version}'
        gcc: "{name}/{version}-spack"
        r-seurat: '{name}/{version}'
        py-cutadapt: '{name}/{version}'
        samtools: '{name}/{version}'
        homer: '{name}/{version}'
        gatk: '{name}/{version}'
        trimgalore: '{name}/{version}'
        py-weblogo: '{name}/{version}'
        py-macs2: '{name}/{version}'
        ^r: '{name}/.{version}'
        ^python: '{name}/.{version}'
      hierarchy:
        - mpi
      core_compilers:
        - gcc@8.4.1
      # prevent generation of module files for any pkg compiled only as a
      # build dependency for an explicitly installed pkg and for all pkgs
      # built with gcc@8.4.1 except for another gcc.
      blacklist_implicits: true
      whitelist:
        - gcc
        - r
        - python
        - ^python
        - ^r
      blacklist: ['%gcc@8.4.1']  # prevent generation of module files for any pkg compiled with gcc@8.4.1
